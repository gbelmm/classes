<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Answers</title>
  
  <link rel="stylesheet" type="text/css" href="style.css">
  
  <!-- Code to configure Keen IO -->

  <script type="text/javascript">
      var Keen=Keen||{configure:function(e){this._cf=e},addEvent:function(e,t,n,i){this._eq=this._eq||[],this._eq.push([e,t,n,i])},setGlobalProperties:function(e){this._gp=e},onChartsReady:function(e){this._ocrq=this._ocrq||[],this._ocrq.push(e)}};(function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://":"http://")+"dc8na2hxrj29i.cloudfront.net/code/keen-2.1.0-min.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();

      // Configure the Keen object with your Project ID and (optional) access keys.
      Keen.configure({
          projectId: "51e72b4f897a2c2a00000000",
          writeKey: "your_write_key", // required for sending events
          readKey: "65e22ca772a261465c9bf58083cae9da53da2615bc6d74c55908feae81ddeebe0be662693fc39eea9161d1f319e1ee647e71ed47add9e53751f6abde87731fb4241fed7d15bce1a570e40363375af0ce7cbdd69f08008dfc53701ce7bcc400f59f425c013b8e175d7ff87f066ac0da12"    // required for doing analysis
      });
  </script>
   
  <!-- Google JS library -->
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    
  <!-- Google library loader --> 
  <script type="text/javascript">
      google.load("jquery", "1.4.2");
  </script>
  
  <script>

      
    // <!-- Code for Keen IO Charts -->   
    
    
    // What's the total revenue from all purchases?
    
    Keen.onChartsReady(function(){
           var purchaseEvents = new Keen.Metric("item_purchases", {
            analysisType: "sum",
            targetProperty: "item.price"
        });
        
        
        //Draw that Metric
        purchaseEvents.draw(document.getElementById("total_rev"), {
            label: "Sum of all purchases",
            prefix: "$"
        });
        
    });
        
    
    // What's the total revenue from whistle purchases?
    
    Keen.onChartsReady(function(){
           var whistlePurchaseEvents = new Keen.Metric("item_purchases", {
            analysisType: "sum",
            targetProperty: "item.price",
            filters: [{
                "property_name" : "item.name",
                "operator" : "eq",
                "property_value" : "whistle"
            }]
        });
        
        
        //Draw that Metric
        whistlePurchaseEvents.draw(document.getElementById("whistles_rev"), {
            label: "Revenue from Whistle Purchases",
            prefix: "$"
        });
    
    });    
        
        
    // How many unique customers made purchases?
    
    Keen.onChartsReady(function(){
           var uniquePurchasers = new Keen.Metric("item_purchases", {
               analysisType: "count_unique",
               targetProperty: "user.name.full",
        });
        
        
        //Draw that Metric
        uniquePurchasers.draw(document.getElementById("unique_customers"), {
            label: "Number of Unique Purchasers",
        });
    
    });        
    
    //  Which customers purchased the most products?
    
    Keen.onChartsReady(function(){
           var thePurchasers = new Keen.Metric("item_purchases", {
               analysisType: "count",
               groupBy: "user.name.full"
        });
        
        
        //Draw that Metric
        thePurchasers.draw(document.getElementById("customers_pie"), {
            label: "Purchasers by # of items",
        });
    
    });
    
    //  Which customers spent the most money?
    
    Keen.onChartsReady(function(){
        var theSpenders = new Keen.Metric("item_purchases", {
           analysisType: "sum",
           targetProperty: "item.price",
           groupBy: "user.name.full"
        });
        
        
        //Draw that Metric
        theSpenders.draw(document.getElementById("customers_spent_pie"), {
            label: "Purchasers by $ spent",
        });
    
    });
    
    //  Which products are most popular?
    
    Keen.onChartsReady(function(){
           var theItems = new Keen.Metric("item_purchases", {
               analysisType: "count",
               groupBy: "item.name"
        });
        
        
        //Draw that Metric
        theItems.draw(document.getElementById("products_pie"), {
            label: "Items by # times purchased",
        });
    
    });
    
    
   </script>
   
 </head>
 <body>
  <h1>Answers!</h1>


  <p>What's the total revenue from all purchases?</p>
  <div id="total_rev"></div>
  <p>What's the total revenue from whistle purchases?</p>
  <div id="whistles_rev"></div>
  <p>How many unique customers made purchases?</p>
  <div id="unique_customers"></div>  
  <p>Which customers purchased the most products?</p>
  <div id="customers_pie"></div>  
  <p>Which customers spent the most money?</p>
  <div id="customers_spent_pie"></div>
  <p>What are the most popular products?</p>
  <div id="products_pie"></div>  
  
  


<p><a href="index.html"><-- Back to Course Page</a></p>
      
 </body>
</html>